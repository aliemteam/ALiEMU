version: '2'
services:
    wordpress:
        image: dsifford/wordpress:1.1.0
        links:
            - db
        ports:
            - 8080:80
            - 443:443
        volumes:
            - ./data:/data
            - ./dist/aliemu-plugins:/app/wp-content/plugins/aliemu-plugins
            - ./dist/Divi-child:/app/wp-content/themes/Divi-child
            - ./wp-content/uploads:/app/wp-content/uploads
            - ./wp-content/plugins/learndash-propanel:/app/wp-content/plugins/learndash-propanel
            - ./wp-content/plugins/sfwd-lms:/app/wp-content/plugins/sfwd-lms
            - ./wp-content/plugins/um-profile-completeness:/app/wp-content/plugins/um-profile-completeness
            - ./wp-content/themes/Divi:/app/wp-content/themes/Divi
        environment:
            DB_NAME: wordpress
            DB_PASS: root
            PLUGINS: >-
                academic-bloggers-toolkit,
                https://github.com/WP-API/Basic-Auth/archive/master.zip,
                google-analytics-dashboard-for-wp,
                query-monitor,
                rest-api,
                simple-tooltips,
                tablepress,
                tinymce-advanced,
                ultimate-member,
                wp-mail-smtp,
                wpdiscuz,
                http://bit.ly/um-recaptcha,
            SEARCH_REPLACE: https://www.aliemu.com,http://localhost:8080
            WP_DEBUG: 'true'
            WP_DEBUG_LOG: 'true'
            WP_DEBUG_DISPLAY: 'false'
            WP_ENV: >-
                ALIEM_API_KEY=${ALIEM_API_KEY}
    db:
        image: mysql:5.7
        ports:
            - 3306:3306
        volumes_from:
            - data
        environment:
            MYSQL_ROOT_PASSWORD: root
    data:
        image: busybox
        volumes:
            - /var/lib/mysql
