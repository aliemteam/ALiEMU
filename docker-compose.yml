version: '2'
services:
    wordpress:
        image: dsifford/wordpress:apache-next # FIXME
        ports:
            - "443:443"
            - "8080:80"
        links:
            - db
        volumes:
            # Database
            - ./data:/data
            # Plugins
            - ./wp-content/plugins/learndash-propanel:/app/wp-content/plugins/learndash-propanel
            - ./wp-content/plugins/sfwd-lms:/app/wp-content/plugins/sfwd-lms
            # Themes
            - ./dist/aliemu:/app/wp-content/themes/aliemu
            - ./wp-content/themes/Divi:/app/wp-content/themes/Divi
            # Uploads
            - ./wp-content/uploads:/app/wp-content/uploads
        environment:
            DB_NAME: wordpress
            SEARCH_REPLACE: https://www.aliemu.com,http://localhost:8080
            WP_DEBUG_DISPLAY: 'true'
            SITE_NAME: aliemu.com
            DB_PASS: root
            DB_USER: root
            PLUGINS: >-
                academic-bloggers-toolkit,
                google-analytics-dashboard-for-wp,
                query-monitor,
                rest-api,
                sendgrid-email-delivery-simplified,
                tinymce-advanced,
                ultimate-member,
                wpdiscuz,
                wp-smush,
                [Basic-Auth-master]https://github.com/WP-API/Basic-Auth/archive/master.zip,
                [um-recaptcha]http://bit.ly/um-recaptcha,
                [local]sfwd-lms,
                [local]learndash-propanel,
                [local]aliemu
            THEMES: >-
                [local]Divi,
                [local]aliemu,
            WP_DEBUG_LOG: 'true'
            WP_DEBUG: 'true'
    db:
        image: mariadb:10
        expose:
            - "3306"
        environment:
            MYSQL_ROOT_PASSWORD: root
        volumes:
            - data:/var/lib/mysql
volumes:
    data: {}
