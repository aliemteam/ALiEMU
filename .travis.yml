sudo: required

language: node_js
node_js:
  - node

services:
  - docker

branches:
  only:
    - master
    - /^greenkeeper-.*$/
    - /^greenkeeper/.*$/

cache:
  directories:
    - '$HOME/.npm'

before_install:
  - docker pull dsifford/phpcs

install:
  - npm ci

script: npm test -- --runInBand

after_success:
  - bash <(curl -s https://codecov.io/bash)

notifications:
  email:
    on_success: never
    on_failure: change
