language: nodejs
node_js:
    - "6"
before_script:
    - nvm install node
    - node --version
    - npm --version
    - nvm --version
    - npm install
script:
    - npm test
deploy:
    provider: script
    script: scripts/deploy
    skip_cleanup: true
    on:
        branch: master
after_script: "cat ./coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js"
branches:
    only:
        - master
notifications:
    webhooks:
        urls:
            - http://104.131.189.237:5000/aliemu/hooks/travis-ci
        on_success: never
        on_failure: change
